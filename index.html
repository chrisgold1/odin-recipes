<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odin Recipes</title>

    <body>
        <h1>Odin Recipes</h1>
        <ul>
        <li><a href ="./recipes/BraisedShortRibs.html" target="_blank">Braised Short Ribs</a></li>
        <li><a href ="./recipes/Braised-Brussels.html" target="_blank">Braised Brussels Sprouts</a></li>
        <li><a href ="./recipes/Glazed-Carrots.html" target="_blank">Glazed Carrots</a></li>
        </ul>

        <div style="background:#eee;border:1px solid #ccc;max-width:420px;width:100%;">
  <div style="background:#76c7c0;width:75%;height:18px;"></div>
</div>
<p><strong>Building Fund 2025:</strong> Raised $5,000 of $10,000 (50%) from 45 donors.</p>
<p style="font-size:.85rem;color:#666">Updated Aug 30, 2025</p>



<iframe width="290" height="376" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTnZ7xw1kKw5nEQn9DjNCih7x576di0OHbUhcrDh665l0OrNkullqQVeRG2ELAu1XtnmktenWlygybI/pubchart?oid=1897499110&amp;format=interactive"></iframe>
    





<div id="thermo-wrap" style="max-width:360px;margin:0 auto;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;">
  <div id="goalLabel" style="text-align:center;font-weight:800;letter-spacing:.5px;margin-bottom:10px;">GOAL: $0</div>

  <svg id="thermo" viewBox="0 0 200 420" width="100%" height="auto" role="img" aria-label="Fundraising Thermometer">
    <defs>
      <clipPath id="tubeClip">
        <rect x="86" y="40" width="28" height="250" rx="14" ry="14"></rect>
      </clipPath>
      <filter id="softShadow" x="-50%" y="-50%" width="200%" height="200%">
        <feDropShadow dx="0" dy="2" stdDeviation="2" flood-opacity="0.18"/>
      </filter>
    </defs>

    <!-- spine + ticks -->
    <g>
      <line x1="100" y1="40" x2="100" y2="300" stroke="#9aa4ad" stroke-width="2" stroke-linecap="round"/>
      <g id="ticks" stroke="#9aa4ad" stroke-width="2"></g>
    </g>

    <!-- tube + bulb outlines -->
    <g filter="url(#softShadow)">
      <rect x="80" y="34" width="40" height="268" rx="20" ry="20" fill="#ffffff" stroke="#3f4b57" stroke-width="6"/>
      <circle cx="100" cy="340" r="46" fill="#ffffff" stroke="#3f4b57" stroke-width="6"/>
    </g>

    <!-- red fill (animated by JS) -->
    <g clip-path="url(#tubeClip)">
      <rect id="tubeFill" x="86" y="300" width="28" height="0" fill="#e74c3c"/>
    </g>

    <!-- bulb fill (pulses on update) -->
    <circle id="bulbFill" cx="100" cy="340" r="40" fill="#e74c3c"/>

    <!-- callout badges -->
    <g id="callouts" font-size="12" fill="#fff" text-anchor="middle">
      <g id="pctBadge" transform="translate(60,220)">
        <rect x="-22" y="-12" rx="10" ry="10" width="44" height="24" fill="#3f4b57"></rect>
        <text id="pctText" y="5" font-weight="700">0%</text>
      </g>
      <g id="amtBadge" transform="translate(140,220)">
        <rect x="-36" y="-12" rx="10" ry="10" width="72" height="24" fill="#3f4b57"></rect>
        <text id="amtText" y="5" font-weight="700">$0</text>
      </g>
    </g>
  </svg>

  <style>
    /* simple pulse on update */
    @keyframes pulse {
      0% { transform: scale(1); filter: drop-shadow(0 0 0 rgba(231,76,60,0)); }
      50% { transform: scale(1.04); filter: drop-shadow(0 0 8px rgba(231,76,60,.45)); }
      100% { transform: scale(1); filter: drop-shadow(0 0 0 rgba(231,76,60,0)); }
    }
  </style>

  <div style="text-align:center;color:#8a94a3;font-size:12px;margin-top:4px;">auto-updates when you edit the Google Sheet</div>
</div>

<script>
(function(){
  // === CONFIG ===
  const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTnZ7xw1kKw5nEQn9DjNCih7x576di0OHbUhcrDh665l0OrNkullqQVeRG2ELAu1XtnmktenWlygybI/pub?gid=0&single=true&output=csv";
  const DURATION_MS = 1100;         // animation duration
  const REFRESH_MS = 0;             // set e.g. 300000 for 5-min refresh

  // === Helpers ===
  const fmtMoney = n => {
    const sign = n < 0 ? "-" : "";
    const v = Math.abs(Number(n)||0);
    return sign + "$" + v.toLocaleString(undefined,{maximumFractionDigits:0});
  };
  const toNumber = s => {
    if (s == null) return 0;
    return Number(String(s).replace(/[^\d.\-]/g,"")) || 0;
  };
  const easeOutCubic = t => 1 - Math.pow(1 - t, 3); // smoother end

  // draw ticks
  const ticksG = document.querySelector("#ticks");
  for (let i=0;i<=10;i++){
    const y = 300 - i*(260/10);
    const len = (i%5===0)?12:7;
    const line = document.createElementNS("http://www.w3.org/2000/svg","line");
    line.setAttribute("x1", 100-len); line.setAttribute("x2", 100+len);
    line.setAttribute("y1", y);       line.setAttribute("y2", y);
    ticksG.appendChild(line);
  }

  // state for animated transitions
  let prevGoal = 0, prevRaised = 0;

  function animateTo(goal, raised){
    goal = Math.max(0, Number(goal)||0);
    raised = Math.max(0, Number(raised)||0);

    const startGoal  = prevGoal;
    const startRaised= prevRaised;

    const start = performance.now();
    const tubeHeight = 260;

    function frame(now){
      const t = Math.min(1, (now - start) / DURATION_MS);
      const k = easeOutCubic(t);

      const g = startGoal  + (goal   - startGoal)  * k;
      const r = startRaised+ (raised - startRaised)* k;
      const pct = g>0 ? Math.min(r/g, 1) : 0;

      // numbers
      document.getElementById("goalLabel").textContent = "GOAL: " + fmtMoney(g);
      document.getElementById("pctText").textContent   = Math.round(pct*100) + "%";
      document.getElementById("amtText").textContent   = fmtMoney(r);

      // fill
      const h = Math.round(tubeHeight * pct);
      const y = 300 - h;
      const tubeFill = document.getElementById("tubeFill");
      tubeFill.setAttribute("y", y);
      tubeFill.setAttribute("height", h);

      // badges follow the fill
      const yBadge = Math.max(60, Math.min(300 - h, 280));
      document.getElementById("pctBadge").setAttribute("transform", `translate(60, ${yBadge})`);
      document.getElementById("amtBadge").setAttribute("transform", `translate(140, ${yBadge})`);

      if (t < 1) requestAnimationFrame(frame);
      else {
        prevGoal = goal; prevRaised = raised;
        // bulb pulse once at the end
        const bulb = document.getElementById("bulbFill");
        bulb.style.animation = "pulse 600ms ease-out 1";
        setTimeout(()=> bulb.style.animation = "none", 650);
      }
    }
    requestAnimationFrame(frame);
  }

  // tolerant CSV reader
  function parseCsv(text){
    const rows = [];
    let row=[], cur="", inQ=false;
    for (let i=0;i<text.length;i++){
      const c=text[i], n=text[i+1];
      if (c === '"'){ inQ = !inQ; continue; }
      if (c === ',' && !inQ){ row.push(cur); cur=""; continue; }
      if ((c === '\n' || (c === '\r' && n !== '\n')) && !inQ){ row.push(cur); rows.push(row); row=[]; cur=""; continue; }
      cur += c;
    }
    if (cur.length || row.length){ row.push(cur); rows.push(row); }
    return rows;
  }
  function extractGoalRaised(rows){
    let goal=0, raised=0;
    for (const r of rows){
      const a = (r[0]||"").toString().trim().toLowerCase();
      const b = (r[1]||"").toString().trim();
      if (!a) continue;
      if (a.includes("goal"))   goal   = toNumber(b);
      if (a.includes("raised")) raised = toNumber(b);
    }
    return {goal, raised};
  }

  function loadOnce(){
    fetch(CSV_URL, {cache:"no-store"})
      .then(r => r.text())
      .then(text => {
        const rows = parseCsv(text);
        const {goal, raised} = extractGoalRaised(rows);
        animateTo(goal, raised);
      })
      .catch(()=> animateTo(10000, 2500)); // fallback demo
  }

  loadOnce();
  if (REFRESH_MS > 0) setInterval(loadOnce, REFRESH_MS);
})();
</script>


</body>

    